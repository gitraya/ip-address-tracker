(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{let e,t,a;function o(o,n){e.setView([o,n],14),t=L.marker([o,n],{icon:a}).addTo(e)}e=L.map("mapid"),e.addLayer(new L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoicmF5YTEwMCIsImEiOiJja212bzg5YTIwNzBuMm5waHlpeGVjeGNtIn0.XYKZrrPoQDuJWYIaAA82mg"})),a=L.icon({iconUrl:"../src/images/icon-location.svg"});const n=new URL("https://geo.ipify.org/api/v1?");let i={apiKey:"at_sWBcpuEmjOoiahw0jdn9pmebP4Zz7",ipAddress:"",domain:""},r=new URLSearchParams({...i}),s=new Object;async function c(e,t){try{const a=await fetch(e+t);let o=await a.json();return o.messages?o={message:"Unable to find the data you requested, it may be that the domain or IP address is not available!"}:o}catch(e){console.log(e)}}function m(e){document.querySelector(".js-ip-address").innerText=e.ip,document.querySelector(".js-location").innerText=`${e.location.city}, ${e.location.country} ${e.location.geonameId}`,document.querySelector(".js-timezone").innerText=`UTC ${e.location.timezone}`,document.querySelector(".js-isp").innerText=e.isp}document.querySelector(".header__form").onsubmit=async function(e){e.preventDefault();const t=e.target.querySelector(".input").value;if(t)return function(e){/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)?r=new URLSearchParams({...i,ipAddress:e}):/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(e)?r=new URLSearchParams({...i,domain:e}):alert("Please enter the correct domain format or IP address!")}(t),s=await c(n,r),s.message?alert(s.message):(m(s),o(s.location.lat,s.location.lng),e.target.querySelector(".input").value="",void(r=new URLSearchParams({...i,ipAddress:"",domain:""})))},window.onload=async function(){s=await c(n,r),m(s),o(s.location.lat,s.location.lng)}}))})();